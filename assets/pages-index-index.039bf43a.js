import{n as e,o as s,c as t,a,w as l,F as i,i as c,b as d,d as f,e as n,r as u,f as r,g as o,h as m,j as _,t as k,k as h}from"./index-d47e6350.js";import{_ as p,a as y,b as g,c as b}from"./star2.46b45908.js";import{_ as C}from"./plugin-vue_export-helper.1b428a4d.js";const R=C({components:{},inject:["getFeedbackList"],data:()=>({tabs:["最新","吐槽","推荐"],currentTab:"最新",regionCounts:{},selectedCity:null}),computed:{feedbackList(){return this.getFeedbackList()},filteredItems(){let e=[];switch(this.currentTab){case"吐槽":e=this.feedbackList.filter((e=>"吐槽"===e.fields.Remarks));break;case"推荐":e=this.feedbackList.filter((e=>"推荐"===e.fields.Remarks));break;default:e=this.feedbackList}return this.selectedCity&&(e=e.filter((e=>e.fields.Region===this.selectedCity))),e},citiesCount(){const e={};return this.feedbackList.forEach((s=>{const t=s.fields.Region;e[t]?e[t]+=1:e[t]=1})),e}},methods:{switchTab(e){this.currentTab=e,this.$emit("tab-switched",e)},handleTabSwitched(e){this.currentTab=e},formatDate:e=>new Date(e).toLocaleDateString(),getResponseTypeText:e=>({opttTdVxtc:"反驳",optId1TKD6:"解释",optId1TKD7:"辟谣"}[e]||"未知回应类型"),viewDetail(s){e({url:`/pages/detail/detail?id=${s}`})},selectCity(e){this.selectedCity=e}}},[["render",function(e,C,R,T,D,I){const w=r,x=c,F=o,v=m;return s(),t(i,null,[a(x,{class:"header"},{default:l((()=>[a(x,{class:"logo"},{default:l((()=>[a(w,{class:"logoimg",src:"/dengta/assets/logo-47bb4fee.png",mode:"heightFix"})])),_:1}),a(x,{class:"search"},{default:l((()=>[d("uni-view",{class:"link"},[a(v,{url:"/pages/link/link?url=https://kaqtunnycfp.feishu.cn/share/base/form/shrcnCwQww4DFVFNGgmzHItOQ5f"},{default:l((()=>[a(F,{class:"fankui"},{default:l((()=>[f("网站反馈")])),_:1})])),_:1})])])),_:1})])),_:1}),a(x,{class:"container"},{default:l((()=>[a(x,{class:"textTOP"},{default:l((()=>[a(F,null,{default:l((()=>[f("试运行...提交的数据不会及时刷新，每小时集中更新一次。")])),_:1})])),_:1}),a(x,{class:"linkGroup"},{default:l((()=>[a(v,{url:"/pages/link/link?url=https://kaqtunnycfp.feishu.cn/share/base/form/shrcnucYNxp6AfaRtOSS5ptdUyf"},{default:l((()=>[a(x,{class:"tucaoTuijian formBut"},{default:l((()=>[f(" 吐槽&推荐 ")])),_:1})])),_:1}),a(v,{url:"/pages/link/link?url=https://kaqtunnycfp.feishu.cn/share/base/form/shrcnOIbet5sZA1QqVhFyRAl9Dc"},{default:l((()=>[a(x,{class:"huiying formBut"},{default:l((()=>[f(" 被吐槽回应 ")])),_:1})])),_:1})])),_:1}),a(x,{class:"RegionList"},{default:l((()=>[a(x,{class:"city-list"},{default:l((()=>[a(x,{class:n(["city-item",{"active-city":null===D.selectedCity}]),onClick:C[0]||(C[0]=e=>I.selectCity(null))},{default:l((()=>[a(F,{class:"city-name"},{default:l((()=>[f("全部")])),_:1})])),_:1},8,["class"]),(s(!0),t(i,null,u(I.citiesCount,((e,t)=>(s(),_(x,{class:n(["city-item",{"active-city":t===D.selectedCity}]),key:t,onClick:e=>I.selectCity(t)},{default:l((()=>[a(F,{class:"city-name"},{default:l((()=>[f("#"+k(t),1),a(F,{class:"city-count"},{default:l((()=>[f(k(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}),a(x,{class:"top-switcher"},{default:l((()=>[a(F,null,{default:l((()=>[(s(!0),t(i,null,u(D.tabs,((e,t)=>(s(),_(F,{class:n(["button",{active:D.currentTab===e}]),key:t,onClick:s=>I.switchTab(e)},{default:l((()=>[f(k(e),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}),a(x,{class:"list"},{default:l((()=>[(s(!0),t(i,null,u(I.filteredItems,((e,c)=>(s(),_(x,{class:"list-item",key:c,onClick:s=>I.viewDetail(e.fields.ID)},{default:l((()=>[a(x,{class:"itemHeader"},{default:l((()=>[a(x,{class:"itemTitle"},{default:l((()=>["吐槽"==e.fields.Remarks?(s(),t("img",{key:0,class:"TitleImg",src:p})):h("",!0),"推荐"==e.fields.Remarks?(s(),t("img",{key:1,class:"TitleImg",src:y})):h("",!0),a(F,{class:"CompanyOrPartner"},{default:l((()=>[f(k(e.fields.CompanyOrPartner),1)])),_:2},1024)])),_:2},1024),a(F,{class:"Region"},{default:l((()=>[f("#"+k(e.fields.Region),1)])),_:2},1024)])),_:2},1024),a(x,{class:"Remarks"},{default:l((()=>[a(F,{class:"rating"},{default:l((()=>[(s(!0),t(i,null,u(parseInt(e.fields.Rating),(e=>(s(),_(F,{class:"star",key:"filled-"+e},{default:l((()=>[d("img",{class:"starImg",src:g})])),_:2},1024)))),128)),(s(!0),t(i,null,u(5-parseInt(e.fields.Rating),(e=>(s(),_(F,{class:"star",key:"empty-"+e},{default:l((()=>[d("img",{class:"starImg",src:b})])),_:2},1024)))),128))])),_:2},1024),a(x,{class:"itemRight"},{default:l((()=>[a(F,{class:"EmploymentType"},{default:l((()=>[f(k(e.fields.Remarks)+"人："+k(e.fields.EmploymentType)+",",1)])),_:2},1024),a(F,{class:"Duration"},{default:l((()=>[f(k(e.fields.Duration),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),a(x,{class:"Reason"},{default:l((()=>[f(k(e.fields.Reason),1)])),_:2},1024),e.fields.Feedback&&e.fields.Feedback.length>0?(s(),_(x,{key:0,class:"response"},{default:l((()=>[f(k(e.fields.ReviewerPosition[0].text)+" 回应 >> [点击查看] ",1)])),_:2},1024)):h("",!0),a(x,{class:"itemFooter"},{default:l((()=>[a(F,{class:"ID"},{default:l((()=>[f(k(e.fields.Remarks)+"编号："+k(e.fields.ID),1)])),_:2},1024),a(F,{class:"dateTime"},{default:l((()=>[f(k(I.formatDate(e.fields.Date)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),a(x,{class:"footer"},{default:l((()=>[a(x,{class:"",style:{"padding-bottom":"20px"}},{default:l((()=>[f(" -----已到最底了----- ")])),_:1}),a(x,{class:""},{default:l((()=>[f(" 网络不是法外之地，请谨言慎行。 ")])),_:1}),a(x,{class:""},{default:l((()=>[f(" ©影视灯塔Beta ")])),_:1})])),_:1})],64)}],["__scopeId","data-v-f9ae5577"]]);export{R as default};
